(function(a){a.fn.storage=function(b){var g={onStart:function(){},onExit:function(){},beforeSave:function(){},afterSave:function(){},storageKey:"storageKey",revert:false,store:true},d=a.extend({},g,b);var f=a(this),e=[];if(d.store){for(var c=0;c<f.length;c++){key=d.storageKey+"-"+c;a(f[c]).attr("data-orig-text",a(f[c]).text());if(d.revert){localStorage.setItem(key,a(f[c]).data("orig-text"));cookie.set(key,a(f[c]).data("orig-text"));a(f[c]).text(a(f[c]).data("orig-text"));if(a(f[c]).text()==""||a(f[c]).text()=="null"){a(f[c]).text(a(f[c]).data("orig-text"))}}else{a(f[c]).text(localStorage.getItem(key));a(f[c]).text(cookie.get(key));if(a(f[c]).text()==""||a(f[c]).text()=="null"){a(f[c]).text(a(f[c]).data("orig-text"))}}e.push(key);a(f[c]).attr("data-key",key)}}return this.each(function(){var i=a(this),h=i.data("key");i.attr("contenteditable","");i.focus(function(){var j=a(this).text();i.addClass("sf-focus");d.onStart.apply(this,[a(this),j])});i.blur(function(){var j=a(this).text();i.removeClass("sf-focus");i.addClass("sf-blur");d.onExit.apply(this,[a(this),j]);if(d.store){d.beforeSave.apply(this,[a(this),j]);localStorage.setItem(h,j);cookie.set(h,j);d.afterSave.apply(this,[a(this),j])}i.removeClass("sf-blur")})})}})(jQuery);